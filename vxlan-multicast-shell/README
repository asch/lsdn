1) Run the run.sh script.

This script will create the following scenario:

#              
#      |---------------------------------|
#      |  NAMESPACE VM1 |  NAMESPACE VM3 |
#      |                |                |
#      | 192.168.1.1/24 | 192.168.1.3/24 |
#      |       veth0    |       veth0    |
#      |        ^       |        ^       |
#      |        |       |        |       |
#      |--------|----------------|-------|
#               |                |
#      ---------|----------------|--------
#      |        |                |       |
#      |        v                v       |
#      |       vm1              vm3      |
#      |        |                |       |
#      |     br_vm1            br_vm3    |
#      |        |                |       |
#      |   239.1.1.10        239.1.1.10  |
#      | vxlan_vm1 (10)   vxlan_vm3 (20) |
#      |        |                |       |
#      |        |   10.1.1.1/24  |       |
#      |        ------veth0-------       |
#      |                ^                |
#      | NAMESPACE M1   |                |
#      |----------------|----------------|
#                       |
#                       v
#                       m1
#                       |
#                      br0
#                       |
#                       m2
#                       ^
#                       |
#      |----------------|----------------|
#      | NAMESPACE M2   |                |
#      |                v                |
#      |        ------veth0-------       |
#      |        |   10.1.1.2/24  |       |
#      |        |                |       |
#      | vxlan_vm2 (10)   vxlan_vm4 (20) |
#      |   239.1.1.10        239.1.1.10  |
#      |        |                |       |
#      |     br_vm2            br_vm4    |
#      |        |                |       |
#      |       vm1              vm3      |
#      |        ^                ^       |
#      |        |                |       |
#      ---------|----------------|--------
#               |                |
#      |--------|----------------|-------|
#      |        |       |        |       |
#      |        v       |        v       |
#      |       veth0    |       veth0    |
#      | 192.168.1.2/24 | 192.168.1.4/24 |
#      |                |                |
#      |  NAMESPACE VM2 |  NAMESPACE VM4 |
#      |---------------------------------|

2) Ping the individual virtual machines:

ip netns exec vm1 ping 192.168.1.2 # OK
ip netns exec vm2 ping 192.168.1.1 # OK

ip netns exec vm3 ping 192.168.1.4 # OK
ip netns exec vm4 ping 192.168.1.3 # OK

ip netns exec vm1 ping 192.168.1.3 # NOK
ip netns exec vm1 ping 192.168.1.4 # NOK
